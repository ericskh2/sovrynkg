---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/abi.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/abi.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_abis_from_file" class="doc_header"><code>load_abis_from_file</code><a href="https://github.com/talosiot-will/sovrynkg/tree/master/sovrynkg/abi.py#L19" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_abis_from_file</code>(<strong><code>abi_file</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="keccak" class="doc_header"><code>keccak</code><a href="https://github.com/talosiot-will/sovrynkg/tree/master/sovrynkg/abi.py#L23" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>keccak</code>(<strong><code>inputstr</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="SignatureDoesNotMatch" class="doc_header"><code>class</code> <code>SignatureDoesNotMatch</code><a href="https://github.com/talosiot-will/sovrynkg/tree/master/sovrynkg/abi.py#L34" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>SignatureDoesNotMatch</code>() :: <code>Exception</code></p>
</blockquote>
<p>Common base class for all non-exit exceptions.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="IndexingWithNonIndexedInput" class="doc_header"><code>class</code> <code>IndexingWithNonIndexedInput</code><a href="https://github.com/talosiot-will/sovrynkg/tree/master/sovrynkg/abi.py#L37" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>IndexingWithNonIndexedInput</code>() :: <code>Exception</code></p>
</blockquote>
<p>Common base class for all non-exit exceptions.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ABI_IO" class="doc_header"><code>class</code> <code>ABI_IO</code><a href="https://github.com/talosiot-will/sovrynkg/tree/master/sovrynkg/abi.py#L40" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ABI_IO</code>(<strong><code>name</code></strong>:<code>str</code>, <strong><code>type</code></strong>:<code>str</code>, <strong><code>indexed</code></strong>:<code>bool</code>=<em><code>None</code></em>, <strong><code>internalType</code></strong>:<code>str</code>=<em><code>None</code></em>) :: <code>BaseModel</code></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ABI" class="doc_header"><code>class</code> <code>ABI</code><a href="https://github.com/talosiot-will/sovrynkg/tree/master/sovrynkg/abi.py#L46" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ABI</code>(<strong><code>name</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>constant</code></strong>:<code>bool</code>=<em><code>None</code></em>, <strong><code>inputs</code></strong>:<code>List</code>[<a href="/sovrynkg/abi.html#ABI_IO"><code>ABI_IO</code></a>]=<em><code>None</code></em>, <strong><code>outputs</code></strong>:<code>List</code>[<a href="/sovrynkg/abi.html#ABI_IO"><code>ABI_IO</code></a>]=<em><code>None</code></em>, <strong><code>payable</code></strong>:<code>bool</code>=<em><code>None</code></em>, <strong><code>stateMutability</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>type</code></strong>:<code>str</code>, <strong><code>anonymous</code></strong>:<code>bool</code>=<em><code>None</code></em>) :: <code>BaseModel</code></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ABIS" class="doc_header"><code>class</code> <code>ABIS</code><a href="https://github.com/talosiot-will/sovrynkg/tree/master/sovrynkg/abi.py#L124" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ABIS</code>(<strong><code>abis</code></strong>:<code>List</code>[<a href="/sovrynkg/abi.html#ABI"><code>ABI</code></a>]) :: <code>BaseModel</code></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_abi_dir" class="doc_header"><code>load_abi_dir</code><a href="https://github.com/talosiot-will/sovrynkg/tree/master/sovrynkg/abi.py#L141" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_abi_dir</code>(<strong><code>abi_dir</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_abi_dirs" class="doc_header"><code>load_abi_dirs</code><a href="https://github.com/talosiot-will/sovrynkg/tree/master/sovrynkg/abi.py#L148" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_abi_dirs</code>(<strong><code>master_dir</code></strong>)</p>
</blockquote>
<p>load a directory of other directories.
    master dir
    ├── project1
    │   ├── abi_file.json
    │   ├── other_abi_file.json
    ├── project2
    │   ├── abi3.abi
    │   ├── abi4.abi</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_decoding</span><span class="p">():</span>
    <span class="n">rusdt</span> <span class="o">=</span> <span class="n">allabis</span><span class="p">[</span><span class="s1">&#39;tokens&#39;</span><span class="p">][</span><span class="s1">&#39;RUSDT&#39;</span><span class="p">]</span>
    <span class="n">rusdtsent</span> <span class="o">=</span> <span class="n">rusdt</span><span class="o">.</span><span class="n">filter_by_name</span><span class="p">(</span><span class="s1">&#39;Sent&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">abis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1">#log number 16 of</span>
    <span class="c1">#https://explorer.rsk.co/tx/0x5ef38a4e6944f6dc1511ae77f34e2dfbefd588b36c79a477d37b7e7b0aa43a66?__ctab=Logs</span>
    <span class="n">topics</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0x06b541ddaa720db2b10a4d0cdac39b8d360425fc073085fac19bc82614677987&#39;</span><span class="p">,</span>
                <span class="s1">&#39;0x0000000000000000000000005a0d867e0d70fcc6ade25c3f1b89d618b5b4eaa7&#39;</span><span class="p">,</span>
                <span class="s1">&#39;0x0000000000000000000000005a0d867e0d70fcc6ade25c3f1b89d618b5b4eaa7&#39;</span><span class="p">,</span>
                <span class="s1">&#39;0x000000000000000000000000849c47f9c259e9d62f289bf1b2729039698d8387&#39;</span><span class="p">,]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;000000000000000000000000000000000000000000000000000015a52de813e00000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&#39;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">rusdtsent</span><span class="o">.</span><span class="n">decode_logs</span><span class="p">(</span><span class="n">topics</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertDictEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> 
                             <span class="p">{</span><span class="s1">&#39;operator&#39;</span><span class="p">:</span> <span class="s1">&#39;0x5a0d867e0d70fcc6ade25c3f1b89d618b5b4eaa7&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;0x5a0d867e0d70fcc6ade25c3f1b89d618b5b4eaa7&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;0x849c47f9c259e9d62f289bf1b2729039698d8387&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;amount&#39;</span><span class="p">:</span> <span class="mi">23799183971296</span><span class="p">,</span>
                             <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;operatorData&#39;</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">})</span>
    
<span class="n">test_decoding</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;70a08231b98ef4ca268c9cc3f6b4590e4bfec28280db06bb5d45e689f2a360be&#39;</span> <span class="ow">in</span> <span class="n">KNOWN</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">KNOWN</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>631</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="lookup_from_topic" class="doc_header"><code>lookup_from_topic</code><a href="https://github.com/talosiot-will/sovrynkg/tree/master/sovrynkg/abi.py#L178" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>lookup_from_topic</code>(<strong><code>topic</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="decode_log" class="doc_header"><code>decode_log</code><a href="https://github.com/talosiot-will/sovrynkg/tree/master/sovrynkg/abi.py#L183" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>decode_log</code>(<strong><code>topics</code></strong>, <strong><code>data</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">decode_log</span><span class="p">([</span><span class="s1">&#39;0x7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65&#39;</span><span class="p">,</span>
  <span class="s1">&#39;0x0000000000000000000000005a0d867e0d70fcc6ade25c3f1b89d618b5b4eaa7&#39;</span><span class="p">],</span>
           <span class="s1">&#39;0x00000000000000000000000000000000000000000000000000001ec08ab86504&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;abi&#39;: ABI(name=&#39;Withdrawal&#39;, constant=None, inputs=[ABI_IO(name=&#39;src&#39;, type=&#39;address&#39;, indexed=True, internalType=&#39;address&#39;), ABI_IO(name=&#39;wad&#39;, type=&#39;uint256&#39;, indexed=False, internalType=&#39;uint256&#39;)], outputs=None, payable=None, stateMutability=None, type=&#39;event&#39;, anonymous=False),
 &#39;decoded&#39;: {&#39;src&#39;: &#39;0x5a0d867e0d70fcc6ade25c3f1b89d618b5b4eaa7&#39;,
  &#39;wad&#39;: 33812309894404}}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_signature</span><span class="p">():</span>
    <span class="n">testevent</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;  {</span>
<span class="s1">        &quot;anonymous&quot;: false,</span>
<span class="s1">        &quot;inputs&quot;: [</span>
<span class="s1">          {</span>
<span class="s1">            &quot;indexed&quot;: true,</span>
<span class="s1">            &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="s1">            &quot;name&quot;: &quot;src&quot;,</span>
<span class="s1">            &quot;type&quot;: &quot;address&quot;</span>
<span class="s1">          },</span>
<span class="s1">          {</span>
<span class="s1">            &quot;indexed&quot;: false,</span>
<span class="s1">            &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="s1">            &quot;name&quot;: &quot;wad&quot;,</span>
<span class="s1">            &quot;type&quot;: &quot;uint256&quot;</span>
<span class="s1">          }</span>
<span class="s1">        ],</span>
<span class="s1">        &quot;name&quot;: &quot;Withdrawal&quot;,</span>
<span class="s1">        &quot;type&quot;: &quot;event&quot;</span>
<span class="s1">      }&#39;&#39;&#39;</span><span class="p">)</span>

    <span class="n">testabi</span> <span class="o">=</span> <span class="n">ABI</span><span class="p">(</span><span class="o">**</span><span class="n">testevent</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">testabi</span><span class="o">.</span><span class="n">signature</span><span class="p">()[</span><span class="s1">&#39;hashed&#39;</span><span class="p">],</span>
                         <span class="s1">&#39;7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65&#39;</span>
                        <span class="p">)</span>
    <span class="k">return</span> <span class="n">testabi</span>
    <span class="c1">#Withdrawl abi from [Wrapped BTC](https://explorer.rsk.co/address/0x542fda317318ebf1d3deaf76e0b632741a7e677d?__ctab=Code)</span>
<span class="n">testabi</span> <span class="o">=</span> <span class="n">test_signature</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">notebook2script</span><span class="p">(</span><span class="n">_nbpath</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Converted abi.ipynb.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

